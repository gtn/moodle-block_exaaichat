define("block_exaaichat/tos",["exports","core/modal_factory","core/modal_events","core/str","core/ajax"],(function(_exports,_modal_factory,_modal_events,_str,_ajax){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Terms of Service dialog functionality
   *
   * @module     block_exaaichat/tos
   * @copyright  2025 GTN Solutions https://gtn-solutions.com
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=async function(){const wrapper=document.querySelector(".exaaichat_tos_wrapper"),openBtn=wrapper.querySelector(".exaaichat_tos_open_btn"),tosContent=wrapper.querySelector(".exaaichat_tos_content").innerHTML,title=await(0,_str.get_string)("terms_of_service:title","block_exaaichat"),acceptLabel=await(0,_str.get_string)("terms_of_service:accept","block_exaaichat");openBtn.addEventListener("click",(async function(){const modal=await _modal_factory.default.create({type:_modal_factory.default.types.SAVE_CANCEL,title:title,body:tosContent,buttons:{save:acceptLabel},large:!0});modal.getRoot().find('[data-action="save"]').prepend('<i class="fa fa-check"></i> '),modal.getRoot().on(_modal_events.default.save,(function(){return modal.getRoot().find('[data-action="save"]').prop("disabled",!0),(0,_ajax.call)([{methodname:"block_exaaichat_accept_tos",args:{}}])[0].then((data=>{data.success&&window.location.reload()})).catch((()=>{modal.getRoot().find('[data-action="save"]').prop("disabled",!1)})),!1})),modal.show()}))},_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events)}));

//# sourceMappingURL=tos.min.js.map