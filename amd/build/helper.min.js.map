{"version":3,"file":"helper.min.js","sources":["../src/helper.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Functions for the chat interface\n *\n * @module     block_exaaichat\n * @copyright  2025 GTN Solutions https://gtn-solutions.com\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {get_string, get_strings, getString as moodleGetString, getStrings as moodleGetStrings} from 'core/str';\n\n/**\n * Convert a jQuery-deferred result into a real ES6 Promise.\n * @param {Object} deferred The jQuery-deferred object\n */\nfunction toNativePromise(deferred) {\n  return new Promise((resolve, reject) => {\n    deferred.then(resolve).fail(reject);\n  });\n}\n\n/**\n * Promise-friendly single string loader.\n * @param {Array} request Array of string requests\n */\nexport async function getStrings(request) {\n  if (moodleGetStrings) {\n    // moodle 4.3 and newer\n    return moodleGetStrings(request);\n  } else {\n    // moodle 4.2 and older\n    return toNativePromise(get_strings(request));\n  }\n}\n\n/**\n * Promise-friendly single string loader.\n * @param {string} key The language string key\n * @param {string} [component='core'] The language string component\n * @param {object|string} [param] The param for variable expansion in the string.\n * @param {string} [lang] The users language - if not passed it is deduced.\n * @return {Promise<string>} A native Promise containing the translated string\n */\nexport async function getString(key, component, param, lang) {\n  if (moodleGetString) {\n    // moodle 4.3 and newer\n    return moodleGetString(key, component, param, lang);\n  } else {\n    // moodle 4.2 and older\n    return toNativePromise(get_string(key, component, param, lang));\n  }\n}\n"],"names":["toNativePromise","deferred","Promise","resolve","reject","then","fail","key","component","param","lang","moodleGetString","request","moodleGetStrings"],"mappings":";;;;;;;;SA6BSA,gBAAgBC,iBAChB,IAAIC,SAAQ,CAACC,QAASC,UAC3BH,SAASI,KAAKF,SAASG,KAAKF,qGA0BAG,IAAKC,UAAWC,MAAOC,aACjDC,gBAEK,kBAAgBJ,IAAKC,UAAWC,MAAOC,MAGvCV,iBAAgB,mBAAWO,IAAKC,UAAWC,MAAOC,2CAxB5BE,gBAC3BC,iBAEK,mBAAiBD,SAGjBZ,iBAAgB,oBAAYY"}