{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template block_exaaichat/chat_component

    This template renders the chat_component.

    Example context (json):
    {
        "logging_enabled": "boolean, true if logging is enabled in the plugin settings",
        "show_top_buttons": "boolean; true if show top buttons",
        "pix_popout": "relative url of the popout pix to the root of moodle",
        "pix_arrow_right": "/relative-url-of-the-arrow-right-pix-to-the-root-of-moodle",
        "pix_refresh": "/relativ-url-of-the-refresh-pix-to-the-root-of-moodle"
    }
}}

<div class="exaaichat_log hidden" role="log"></div>

<div class="exaaichat_top-buttons">
    {{#show_top_buttons}}
        {{#logging_enabled}}
            <div title="{{#str}}loggingenabled, block_exaaichat{{/str}}" class="recording"></div>
        {{/logging_enabled}}
        {{#settings_url}}
            <a class="btn btn-secondary exaaichat_btn" href="{{settings_url}}">
                <i class="fa fa-gear" title="{{#str}} settings {{/str}}"></i>
            </a>
        {{/settings_url}}
        <button class="btn btn-secondary exaaichat_btn exaaichat_popout_btn" title="{{#str}}popout, block_exaaichat {{/str}}">
            <img src="{{{config.wwwroot}}}{{{ pix_popout }}}" alt="{{#str}}popout, block_exaaichat {{/str}}" />
        </button>
        <button class="btn btn-secondary exaaichat_btn exaaichat_btn_close" title="{{#str}}popout, block_exaaichat {{/str}}">
            <i class="fa fa-close"></i>
        </button>
    {{/show_top_buttons}}
</div>
<div class="exaaichat_control_bar">
    <div class="exaaichat_input_bar {{#show_ai_provider_select}}with_ai_provider_select{{/show_ai_provider_select}}" id="input_bar">
        <textarea class="exaaichat_input" aria-label="{{#str}}askaquestion, block_exaaichat{{/str}}" rows=1 placeholder="{{#str}}askaquestion, block_exaaichat{{/str}}" name="message"></textarea>
        {{#show_ai_provider_select}}
            <select name="ai_provider">
                {{#ai_providers}}
                    <option value="{{id}}">{{label}}</option>
                {{/ai_providers}}
            </select>
        {{/show_ai_provider_select}}
        <button class="btn btn-primary exaaichat_input_submit_btn" title="{{#str}}askaquestion, block_exaaichat{{/str}}">
            <img src="{{{config.wwwroot}}}{{{ pix_arrow_right }}}" alt="{{#str}}askaquestion, block_exaaichat{{/str}}" class="exaaichat_input_submit_btn_icon"/>
        </button>
        <button class="btn btn-secondary exaaichat_input_refresh_btn" title="{{#str}}new_chat, block_exaaichat {{/str}}" id="refresh">
            <img src="{{{config.wwwroot}}}{{{ pix_refresh }}}" class="exaaichat_input_refresh_btn_icon" alt="{{#str}}new_chat, block_exaaichat {{/str}}" />
        </button>
    </div>
</div>
